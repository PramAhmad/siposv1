import{_ as O,a as W}from"./SectionMain.d4578193.js";import{_ as Y}from"./NotificationBarInCard.5405e40b.js";import{_ as z}from"./MahasiswaCard.87fa8894.js";import{F as G}from"./FotoMahasiswa.f6c907e3.js";import{_ as J,a as K}from"./FormControl.06cdc0db.js";import{_ as Q}from"./BaseButton.214b4472.js";import{_ as X}from"./BaseButtons.1a714a7d.js";import{_ as Z}from"./CardBox.6b3f7427.js";import{B as aa}from"./BaseDivider.3b35fdc1.js";import{r as i,h as ta,i as ea,x as oa,j as na,q as C,w as r,f as sa,o as d,b as e,k as l,d as S,l as la,a as t,n as ra,m as g,H as ia,I as ma,c as v,s as F,F as T,t as p}from"./entry.8c7ce858.js";import{j as M,k as ua}from"./mdi.70a351a6.js";import"./colors.7637652d.js";import"./config.edcd5bec.js";import"./PillTag.fc535c58.js";import"./BaseLevel.99ced603.js";import"./BlobServiceClient.faa98db4.js";import"./__vite-browser-external.7d645feb.js";import"./main.ad903eef.js";import"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const ca={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2"},_a=["onSubmit"],da=t("option",{value:"A"},"A",-1),pa=t("option",{value:"B"},"B",-1),ba=t("option",{value:"C"},"C",-1),fa=[da,pa,ba],ha=t("button",{type:"submit",class:"py-2 px-5 bg-sky-600 rounded-md text-white hover:bg-sky-500"},"Update",-1),ya={class:"mt-4"},ga=t("strong",null,"Total Pembayaran Yang Sudah Di Lakukan:",-1),va={class:"mt-2 mb-4"},xa={class:"text-blue-500"},ka=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Nama Pembayaran"),t("th",null,"Total bayar"),t("th",null,"Tanggal bayar")])],-1),wa={"data-label":"no"},Ba={"data-label":"Nama Pembayaran"},Ma={"data-label":"Total Bayar"},Na={"data-label":"Tanggal Bayar"},Ga={__name:"index",setup(Pa){const q=i("https://wsgwhdbimgdepfxktxlo.supabase.co/storage/v1/object/public/mahasiswa/"),m=i(),u=i(),c=i(),_=i(),b=ta(),x=i([]),f=ea(),N=i(!1),h=i(!1),D=async()=>{if(h.value=!1,m.value){const{data:n,error:a}=await b.from("mahasiswa").update({nama:u.value,npm:c.value,kelas:_.value}).eq("id",f.params.id);a?console.log(a):(h.value=!0,k())}else{const{data:n,error:a}=await b.from("mahasiswa").update({nama:u.value,npm:c.value,kelas:_.value,foto:q.value+m.value}).eq("id",f.params.id);a?console.log(a):(h.value=!0,k())}},k=async()=>{const{data:n,error:a}=await b.from("mahasiswa").select().eq("id",f.params.id);if(n[0]){const s=n[0];u.value=s.nama||"",c.value=s.npm||"",_.value=s.kelas||"",m.value=s.foto||""}a&&console.log(a)},U=async()=>{N.value=!1;const{data:n,error:a}=await b.from("payment").select("tanggal_bayar,mahasiswa_id(nama,kelas),total_bayar,payment_id(nama_pembayaran)").eq("mahasiswa_id",f.params.id);a?console.log(a):(x.value=n||[],N.value=!0)},L=oa(()=>{const n={};for(const a of x.value){const s=a.payment_id.nama_pembayaran,w=a.total_bayar;n[s]||(n[s]=0),n[s]+=w}return n});return na(()=>{U(),k()}),(n,a)=>{const s=O,w=Y,R=z,$=G,B=J,P=K,j=Q,A=X,V=Z,I=aa,E=W,H=sa;return d(),C(H,{name:"authenticated"},{default:r(()=>[e(E,null,{default:r(()=>[e(s,{icon:l(M),title:"Profile",main:""},null,8,["icon"]),l(h)?(d(),C(w,{key:0,class:"mb-6",type:"success"},{default:r(()=>[S(" Data berhasil di update ")]),_:1})):la("",!0),t("div",ca,[e(R,{class:"mb-6"}),t("form",{method:"post",onSubmit:ra(D,["prevent"])},[e(V,null,{default:r(()=>[e(B,{label:"New Profile",help:"Max 500kb"},{default:r(()=>[e($,{path:l(m),"onUpdate:path":a[0]||(a[0]=o=>g(m)?m.value=o:null)},null,8,["path"])]),_:1}),e(B,{label:"nama",help:"Masukan nama baru"},{default:r(()=>[e(P,{modelValue:l(u),"onUpdate:modelValue":a[1]||(a[1]=o=>g(u)?u.value=o:null),icon:l(M),name:"nama",required:"",autocomplete:"nama"},null,8,["modelValue","icon"])]),_:1}),e(B,{label:"NPM",help:"Masukan NPM baru"},{default:r(()=>[e(P,{modelValue:l(c),"onUpdate:modelValue":a[2]||(a[2]=o=>g(c)?c.value=o:null),icon:l(ua),type:"number",name:"npm",required:"",autocomplete:"npm"},null,8,["modelValue","icon"])]),_:1}),ia(t("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>g(_)?_.value=o:null),class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-600 dark:border-gray-600 dark:placeholder-gray-400 p-2"},fa,512),[[ma,l(_)]]),e(A,null,{default:r(()=>[ha,e(j,{color:"info",label:"Options",outline:""})]),_:1})]),_:1})],40,_a),e(I)]),e(s,{icon:l(M),main:"",title:"Pembayaran "},null,8,["icon"]),e(V,{class:"mb-6","has-table":""},{default:r(()=>[t("div",ya,[ga,t("ul",va,[(d(!0),v(T,null,F(l(L),(o,y)=>(d(),v("li",{key:y,class:"text-gray-700 dark:text-white font-semibold py-1 list-disc ml-6"},[S(p(y)+": ",1),t("span",xa,"Rp. "+p(o),1)]))),128))])]),t("table",null,[ka,t("tbody",null,[(d(!0),v(T,null,F(l(x),(o,y)=>(d(),v("tr",{key:o.id},[t("td",wa,p(y+1),1),t("td",Ba,p(o.payment_id.nama_pembayaran),1),t("td",Ma,"Rp."+p(o.total_bayar),1),t("td",Na,p(o.tanggal_bayar),1)]))),128))])])]),_:1})]),_:1})]),_:1})}}};export{Ga as default};
