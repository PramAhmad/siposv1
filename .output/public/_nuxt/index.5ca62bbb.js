import{_ as q,a as $}from"./SectionMain.d4578193.js";import{B as D}from"./BaseDivider.3b35fdc1.js";import{_ as F}from"./MahasiswaCard.87fa8894.js";import{a as U,_ as W}from"./FormControl.06cdc0db.js";import{_ as j}from"./BaseButton.214b4472.js";import{_ as A}from"./BaseButtons.1a714a7d.js";import{_ as L}from"./CardBox.6b3f7427.js";import{h as O,r,i as E,j as J,q as R,w as n,f as z,o as x,b as o,k as c,c as G,l as K,a as y,n as Q,m as b}from"./entry.8c7ce858.js";import"./mdi.70a351a6.js";import"./colors.7637652d.js";import"./config.edcd5bec.js";import"./PillTag.fc535c58.js";import"./BaseLevel.99ced603.js";import"./main.ad903eef.js";import"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js";import"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js";const H={key:0,class:"bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3",role:"alert"},I=y("p",{class:"font-bold"},"Transaksi",-1),X=y("p",{class:"text-sm"},"Transaksi Berhasil",-1),Y=[I,X],Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2"},fa={__name:"index",setup(aa){const _=O(),B=r([]),i=r(),u=E(),s=r(),l=r(),f=r(!1),d=r(!1),k=async()=>{const t="https://discord.com/api/webhooks/1152573110315393134/-yvMPEfyJyirKt8_WN-6nEu7C2_D4CAjUtLQ8FFryiMOdcWMV2pJ2W6zGPluN0j4xfNw",a={content:`Transaksi diperbarui dari ${i.value}
 sebesar ${l.value}
  pada tanggal ${s.value}`};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}catch(e){console.error(e)}},w=async()=>{d.value=!1;const{data:t,error:a}=await _.from("payment").update({tanggal_bayar:s.value,total_bayar:l.value}).eq("id",u.params.id);a?console.log(a):(d.value=!0,k())},V=async()=>{const{data:t,error:a}=await _.from("payment").select("tanggal_bayar,mahasiswa_id(nama,kelas),total_bayar,payment_id(nama_pembayaran)").eq("id",u.params.id);if(t[0]){const e=t[0];s.value=e.tanggal_bayar||"",l.value=e.total_bayar||"",i.value=e.mahasiswa_id.nama||""}a&&console.log(a)},M=async()=>{f.value=!1;const{data:t,error:a}=await _.from("payment").select("tanggal_bayar,mahasiswa_id(nama,kelas),total_bayar,payment_id(nama_pembayaran)").eq("id",u.params.id);a?console.log(a):(B.value=t,f.value=!0)};return J(()=>{V(),M()}),(t,a)=>{const e=q,g=D,C=F,p=U,v=W,h=j,N=A,T=L,P=$,S=z;return x(),R(S,{name:"authenticated"},{default:n(()=>[o(P,null,{default:n(()=>[o(e,{icon:t.mdiAccount,title:"Profile",main:""},null,8,["icon"]),c(d)?(x(),G("div",H,Y)):K("",!0),o(g),y("div",Z,[o(C,{class:"mb-6"}),o(T,{"is-form":"",onSubmit:Q(w,["prevent"])},{footer:n(()=>[o(N,null,{default:n(()=>[o(h,{color:"info",type:"submit",label:"Submit"}),o(h,{color:"info",label:"Options",outline:""})]),_:1})]),default:n(()=>[o(p,{modelValue:c(i),"onUpdate:modelValue":a[0]||(a[0]=m=>b(i)?i.value=m:null),disabled:"","aria-readonly":"true",icon:t.mdiAccount,type:"text",name:"nama",class:"mb-3"},null,8,["modelValue","icon"]),o(v,{label:"Total Bayar",help:"Masukan total bayar baru"},{default:n(()=>[o(p,{modelValue:c(l),"onUpdate:modelValue":a[1]||(a[1]=m=>b(l)?l.value=m:null),icon:t.mdiAccount,type:"number",name:"nama",required:""},null,8,["modelValue","icon"])]),_:1}),o(v,{label:"Tanggal bayar",help:"Masukan NPM baru"},{default:n(()=>[o(p,{modelValue:c(s),"onUpdate:modelValue":a[2]||(a[2]=m=>b(s)?s.value=m:null),icon:t.mdiMail,type:"date",name:"tanggal_bayar",required:""},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"]),o(g)])]),_:1})]),_:1})}}};export{fa as default};
