import{r as P,bb as Ae,aw as Me,au as Fe,w as ye,bc as He,bd as ze,be as We,d as ae,bf as ge,o,m as p,k as c,E,h as C,f as e,bg as le,t as j,p as D,v as F,a3 as Ge,a5 as ee,F as R,n as A,a0 as ce,a4 as Je,a as V,i as f,j as k,U as _e,C as be,bh as Ke,a7 as Qe,as as ue,a6 as Xe,av as Ye,a9 as ke,l as te,H as de,ap as Ze,_ as Ce,A as xe,bi as et,bj as tt,ad as ot,R as nt,bk as st,ak as lt}from"./entry.d12f745d.js";import{_ as at}from"./Navbar.vue.c509e5d2.js";import{_ as we}from"./Badge.73590739.js";import{_ as $e}from"./NSelect.vue.d378258a.js";import{_ as rt}from"./NCheckbox.vue.1ddacd54.js";import{u as Se,_ as it}from"./storage-options.f9b1696b.js";import{_ as ut}from"./DataSchemaButton.vue.58aa4fbb.js";import{_ as dt}from"./NCodeBlock.vue.31f18b3e.js";import{C as ve,S as Te}from"./constants.4e5eba24.js";import{U as ct}from"./json-editor-vue.ddceb6bb.js";import{_ as pt}from"./NSectionBlock.00736ab5.js";import{_ as ft}from"./DrawerRight.vue.462f9048.js";import"./client.237dd3ea.js";import"./NIconTitle.vue.9acdbad1.js";const se=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function mt(r,h){if(typeof r!="string")throw new TypeError("argument str must be a string");const m={},w=(h||{}).decode||yt;let _=0;for(;_<r.length;){const t=r.indexOf("=",_);if(t===-1)break;let y=r.indexOf(";",_);if(y===-1)y=r.length;else if(y<t){_=r.lastIndexOf(";",t-1)+1;continue}const a=r.slice(_,t).trim();if(m[a]===void 0){let l=r.slice(t+1,y).trim();l.codePointAt(0)===34&&(l=l.slice(1,-1)),m[a]=ht(l,w)}_=y+1}return m}function he(r,h,m){const n=m||{},w=n.encode||gt;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!se.test(r))throw new TypeError("argument name is invalid");const _=w(h);if(_&&!se.test(_))throw new TypeError("argument val is invalid");let t=r+"="+_;if(n.maxAge!==void 0&&n.maxAge!==null){const y=n.maxAge-0;if(Number.isNaN(y)||!Number.isFinite(y))throw new TypeError("option maxAge is invalid");t+="; Max-Age="+Math.floor(y)}if(n.domain){if(!se.test(n.domain))throw new TypeError("option domain is invalid");t+="; Domain="+n.domain}if(n.path){if(!se.test(n.path))throw new TypeError("option path is invalid");t+="; Path="+n.path}if(n.expires){if(!vt(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");t+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(t+="; HttpOnly"),n.secure&&(t+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":t+="; Priority=Low";break;case"medium":t+="; Priority=Medium";break;case"high":t+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:t+="; SameSite=Strict";break;case"lax":t+="; SameSite=Lax";break;case"strict":t+="; SameSite=Strict";break;case"none":t+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return t}function vt(r){return Object.prototype.toString.call(r)==="[object Date]"||r instanceof Date}function ht(r,h){try{return h(r)}catch{return r}}function yt(r){return r.includes("%")?decodeURIComponent(r):r}function gt(r){return encodeURIComponent(r)}const _t={path:"/",watch:!0,decode:r=>ze(decodeURIComponent(r)),encode:r=>encodeURIComponent(typeof r=="string"?r:JSON.stringify(r))};function bt(r,h){const m={..._t,...h},n=kt(m)||{},w=P(n[r]??m.default?.());{const _=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${r}`);Ae()&&Me(()=>{_?.close()});const t=()=>{xt(r,w.value,m),_?.postMessage(We(w.value))};let y=!1;_&&(_.onmessage=a=>{y=!0,w.value=a.data,Fe(()=>{y=!1})}),m.watch?ye(w,(a,l)=>{y||He(a,l)||t()},{deep:m.watch!=="shallow"}):t()}return w}function kt(r={}){return mt(document.cookie,r)}function Ct(r,h,m={}){return h==null?he(r,h,{...m,maxAge:-1}):he(r,h,m)}function xt(r,h,m={}){document.cookie=Ct(r,h,m)}const wt=c("div",{"x-divider":""},null,-1),Ve=ae({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(r){const h=P(!0),m=ge();return(n,w)=>{const _=ce,t=we,y=Ve;return o(),p("div",null,[c("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:E([{"bg-active":e(m)===n.item.filepath}]),style:Ge({paddingLeft:`calc(0.5rem + ${n.index*1.5}em)`}),onClick:w[0]||(w[0]=a=>{h.value=!e(h),m.value=n.item.filepath})},[c("div",{class:E({"w-12":!n.item.routes}),"flex-none":"","text-left":""},[n.item.type==="collection"?(o(),C(_,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(h)?90:0,transition:""},null,8,["transform-rotate"])):(o(),C(t,{key:1,class:E(("getRequestMethodClass"in n?n.getRequestMethodClass:e(le))(n.item.method||"*")),textContent:j((n.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),c("span",{class:E({"flex items-center":n.item.routes}),"text-sm":"","font-mono":""},[n.item.type==="collection"?(o(),C(_,{key:0,title:`${n.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):D("",!0),F(" "+j(n.item.route),1)],2)],6),wt,e(h)?ee(n.$slots,"default",{key:0},()=>[(o(!0),p(R,null,A(n.item.routes,a=>(o(),C(y,{key:a.filepath,item:a,index:n.index+1},null,8,["item","index"]))),128))]):D("",!0)])}}}),$t={p4:"",flex:"~ col gap-4"},St={key:1,ml2:"",flex:""},Tt=["value"],Vt={key:0,flex:"","gap-4":""},Rt=c("div",{"flex-auto":""},null,-1),Re=ae({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(r,{emit:h}){const m=r,n=Je(m,"modelValue",h,{passive:!0}),w=V(()=>[...m.keys,"key","value","type"]),_=V(()=>{const a={};for(const l of w.value)a[l]=m.default[l]||"";return a}),t=["string","number","boolean","file","date","time","datetime-local"];function y(a,l){const U=l.target;if(U.files&&U.files[0]){const G=U.files[0],M=new FileReader;M.readAsDataURL(G),M.onload=()=>{n.value[a].value=M.result}}}return ye(()=>n,a=>{a.value.forEach(l=>{if(l.type==="number"&&typeof l.value!="number"){const U=Number.parseFloat(l.value);l.value=Number.isNaN(U)?0:U}else l.type==="boolean"&&typeof l.value!="boolean"?l.value=!0:l.type==="file"&&typeof l.value!="object"?l.value="":l.type==="date"&&typeof l.value=="string"&&!l.value.match(/^\d{4}-\d{2}-\d{2}$/)?l.value=new Date().toISOString().slice(0,10):l.type==="time"&&typeof l.value=="string"&&!l.value.match(/^\d{2}:\d{2}$/)?l.value=new Date().toISOString().slice(11,16):l.type==="datetime-local"&&typeof l.value=="string"&&!l.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?l.value=new Date().toISOString().slice(0,16):l.type==="string"&&(l.value=l.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(a,l)=>{const U=_e,G=rt,M=$e,z=ce,v=be;return o(),p("div",$t,[(o(!0),p(R,null,A(e(n),(d,x)=>(o(),p("div",{key:x,flex:"~ gap-2","justify-around":""},[ee(a.$slots,"input",{item:d}),(o(!0),p(R,null,A(e(w),$=>(o(),p(R,{key:$},[d.type!==null&&$==="key"?(o(),C(U,{key:0,modelValue:d[$],"onUpdate:modelValue":g=>d[$]=g,placeholder:$,"flex-1":"","font-mono":"",n:"sm primary",disabled:a.disabled,class:E(a.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):$==="value"?(o(),p(R,{key:1},[d.type==="file"?(o(),C(U,{key:0,type:"file",disabled:a.disabled,class:E(a.disabled?"op75":""),onChange:g=>y(x,g)},null,8,["disabled","class","onChange"])):d.type==="boolean"?(o(),p("div",St,[f(G,{modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,placeholder:"Value",n:"green lg",disabled:a.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(o(),C(U,{key:2,modelValue:d.value,"onUpdate:modelValue":g=>d.value=g,type:d.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:a.disabled,class:E(a.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):$==="type"?(o(),C(M,{key:2,modelValue:d.type,"onUpdate:modelValue":g=>d.type=g,n:"sm green",class:E(a.disabled?"op75":""),disabled:a.disabled},{default:k(()=>[(o(),p(R,null,A(t,g=>c("option",{key:g,value:g},j(g),9,Tt)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):D("",!0)],64))),128)),ee(a.$slots,"input-actions",{},()=>[f(v,{n:"red",disabled:a.disabled,class:E(a.disabled?"op0!":""),onClick:$=>e(n).splice(x,1)},{default:k(()=>[f(z,{icon:"carbon:delete"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),a.disabled?D("",!0):(o(),p("div",Vt,[ee(a.$slots,"actions",{params:e(n)},()=>[f(v,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:l[0]||(l[0]=d=>e(n).push({...e(_)}))},{default:k(()=>[F(" Add ")]),_:1}),Rt,e(n).length?(o(),C(v,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:l[1]||(l[1]=d=>n.value=[])},{default:k(()=>[F(" Remove All ")]),_:1})):D("",!0)])])),ee(a.$slots,"default")])}}}),Ut={"h-full":"","w-full":"",flex:"~ col"},It={flex:"~ col gap-2","flex-none":"",p4:"","navbar-glass":""},Dt={flex:"~ gap2"},Nt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Et=c("div",{"flex-auto":""},null,-1),jt={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Ot={"text-right":"","font-mono":""},Pt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},qt={flex:"~ gap-4"},Bt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Lt=c("div",{"w-5":"","x-divider":""},null,-1),At=c("div",{"flex-none":""}," Default Inputs ",-1),Mt=c("div",{"x-divider":""},null,-1),Ft={key:2},Ht={key:3,border:"b base",relative:"","n-code-block":""},zt={flex:"~ wrap","w-full":""},Wt=["onClick"],Gt=c("div",{border:"b base","flex-auto":""},null,-1),Jt={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},Kt=c("div",null,"Response",-1),Qt={key:1,"text-xs":"",op50:""},Xt=c("div",{"flex-auto":""},null,-1),Yt=c("div",{op50:""}," Request finished in ",-1),Zt={key:0,"flex-auto":"","overflow-auto":""},eo={border:"~ base","h-full":"","w-full":"",rounded:""},to=["data"],oo={key:2,"flex-auto":"","overflow-auto":"",p4:""},no={border:"~ base",rounded:""},so=["src"],lo={key:1,controls:"",rounded:""},ao=["src"],ro=ae({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(r,{emit:h}){const m=r,[n,w]=Ke(),_=Qe(),t=ue({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),y=V(()=>t.contentType.includes("application/json")?"json":t.contentType.includes("text/html")?"html":t.contentType.includes("text/css")?"css":t.contentType.includes("text/javascript")?"javascript":t.contentType.includes("image")||t.contentType.includes("video")?"media":t.contentType.includes("text/xml")||t.contentType.includes("application/xml")?"xml":t.contentType.includes("application/pdf")?"pdf":"text"),a=V(()=>{if(y.value==="json")return JSON.stringify(t.data,null,2);if(y.value==="media"||y.value==="pdf"){const s=new Blob([t.data],{type:t.contentType});return URL.createObjectURL(s)}return t.data}),l=P(!1),U=P(!1),G=Xe(),M=V(()=>m.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),z=V(()=>M.value?.filter(s=>s.startsWith(":")||s.startsWith("**:"))||[]),v=P(m.route.method||"GET"),d=P({}),x=ue({query:[{key:"",value:"",type:"string"}],body:[{key:"",value:"",type:"string"}],headers:[{key:"Content-Type",value:"application/json",type:"string"}]}),$=P({}),{inputDefaults:g}=Se("serverRoutes"),O=["GET","POST","PUT","PATCH","DELETE","HEAD"],q=["PATCH","POST","PUT","DELETE"],B=V(()=>q.includes(v.value.toUpperCase())),S=P(z.value.length?"params":"query"),oe=["input","json"],H=P(oe[0]),K=V({get:()=>x[S.value],set:s=>{x[S.value]=s}}),X=V(()=>({...J(g.value.query),...J(x.query)})),T=V(()=>({...J(g.value.headers),...J(x.headers)})),Y=V(()=>B.value?H.value==="json"?{...J(g.value.body),...$.value}:{...J(g.value.body),...J(x.body)}:void 0),Ue=V(()=>{let s=_.value?.devServer.url||"http://localhost";s.charAt(s.length-1)==="/"&&(s=s.slice(0,-1));const u=_.value?.devServer.port||3e3;return s.includes(`:${u}`)?s:`${s}:${u}`}),ne=V(()=>{let s=new URLSearchParams(X.value).toString();s&&(s=`?${s}`);const u=(M.value?.map(N=>(N.startsWith(":")||N.startsWith("**:"))&&d.value[N]||N).join("")||"")+s;let b=_.value?.app.baseURL||"";return(b==="./"||b===".")&&(b=""),b.endsWith("/")&&(b=b.slice(0,-1)),b+u}),Ie=V(()=>Ue.value+ne.value);function J(s){const u=Object.fromEntries(s.filter(({key:b,value:N})=>b&&N!==void 0).map(({key:b,value:N})=>[b,N]));return Object.entries(u).length?u:void 0}async function pe(){U.value=!0,l.value=!0;const s=Date.now();try{t.data=await $fetch(Ie.value,{method:v.value.toUpperCase(),headers:T.value,query:X.value,body:Y.value,onResponse({response:u}){t.contentType=(u.headers.get("content-type")||"").toString().toLowerCase().trim(),t.statusCode=u.status,t.error=void 0},onResponseError(u){t.error=u.response._data,t.data=u.response._data}})}catch{}l.value=!1,t.fetchTime=Date.now()-s}const fe=V(()=>{const s=[],u=[],b=Object.entries(T.value).filter(([I,L])=>I&&L&&!(I==="Content-Type"&&L==="application/json")).map(([I,L])=>`  '${I}': '${L}'`).join(`,
`);v.value.toUpperCase()!=="GET"&&u.push(`method: '${v.value.toUpperCase()}'`),b&&u.push(`headers: {
${b}
}`),Y.value&&u.push(`body: ${JSON.stringify(Y.value,null,2)}`);const N=u.length?`, {
${u.join(`,
`).split(`
`).map(I=>`  ${I}`).join(`
`)}
}`:"";return s.push({name:"useFetch",lang:"javascript",docs:ve.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${ne.value}'${N})`}),s.push({name:"$fetch",lang:"javascript",docs:ve.nuxt.$fetch,code:`await $fetch('${ne.value}'${N})`}),s}),De=V(()=>{const s=[];return z.value.length&&s.push({name:"Params",slug:"params",length:z.value.length}),s.push({name:"Query",slug:"query",length:x.query.length}),B.value&&s.push({name:"Body",slug:"body",length:x.body.length}),s.push({name:"Headers",slug:"headers",length:x.headers.length}),s.push({name:"Cookies",slug:"cookies"}),s.push({name:"Snippets",slug:"snippet"}),s}),Z=P(Ne());function Ne(){return document.cookie.split("; ").map(s=>{const[u,b]=s.split("=");return{key:u,value:b}})}const W=ue({key:"",value:""});function re(s,u){if(!s)return;const b=Z.value.find(I=>I.key===s),N=bt(s);b!==void 0?u===void 0&&(Z.value=Z.value.filter(I=>I.key!==s)):(Z.value.push({key:s,value:u}),W.key="",W.value=""),N.value=u}return Ye(()=>{H.value==="json"&&typeof $.value=="string"&&($.value=JSON.parse($.value))}),(s,u)=>{const b=be,N=$e,I=_e,L=ce,Ee=Ce,me=Re,je=it,Oe=xe,Pe=et,ie=we,qe=ut,Be=dt,Le=ke("tooltip");return o(),p("div",Ut,[c("div",It,[c("div",Dt,[s.route.method?(o(),C(b,{key:0,class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(le))(e(v))),"pointer-events-none":"",tabindex:"-1"},{default:k(()=>[F(j(e(v).toUpperCase()),1)]),_:1},8,["class"])):(o(),C(N,{key:1,modelValue:e(v),"onUpdate:modelValue":u[0]||(u[0]=i=>te(v)?v.value=i:null),class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(le))(e(v)))},{default:k(()=>[(o(),p(R,null,A(O,i=>c("option",{key:i,class:E(("getRequestMethodClass"in s?s.getRequestMethodClass:e(le))(i))},j(i.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),f(I,{"model-value":e(ne),disabled:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"primary xs"},null,8,["model-value"]),f(b,{n:"primary solid",onClick:pe},{default:k(()=>[f(L,{icon:"carbon:send"})]),_:1})])]),c("div",Nt,[(o(!0),p(R,null,A(e(De),i=>(o(),C(b,{key:i.slug,class:E(e(S)===i.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Q=>S.value=i.slug},{default:k(()=>[f(L,{icon:("ServerRouteTabIcons"in s?s.ServerRouteTabIcons:e(Te))[i.slug]},null,8,["icon"]),F(" "+j(i.name)+" "+j(i?.length?`(${i.length})`:"")+" ",1),c("span",null,j(e(g)[i.slug]?.length?`(${e(g)[i.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),Et,de((o(),C(b,{title:"Open in Editor",onClick:u[1]||(u[1]=i=>e(G)(s.route.filepath))},{default:k(()=>[f(L,{icon:"carbon-launch"})]),_:1})),[[Le,"Open in Editor"]])]),e(S)==="params"?(o(),p("div",jt,[(o(!0),p(R,null,A(e(z),i=>(o(),p(R,{key:i},[c("div",Ot,j(i),1),f(I,{modelValue:e(d)[i],"onUpdate:modelValue":Q=>e(d)[i]=Q,placeholder:i,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):D("",!0),e(S)==="cookies"?(o(),p("div",Pt,[(o(!0),p(R,null,A(e(Z),i=>(o(),p("div",{key:i.key,flex:"~ gap-4 items-center"},[f(I,{placeholder:"Key...","model-value":i.key,disabled:"","op-70":""},null,8,["model-value"]),f(I,{placeholder:"Value...","model-value":i.value,"flex-1":"",n:"primary",onInput:Q=>re(i.key,Q.target?.value)},null,8,["model-value","onInput"]),f(b,{title:"Delete",n:"red",onClick:Q=>re(i.key,void 0)},{default:k(()=>[f(L,{icon:"i-carbon-delete"})]),_:2},1032,["onClick"])]))),128)),c("div",qt,[f(I,{modelValue:e(W).key,"onUpdate:modelValue":u[2]||(u[2]=i=>e(W).key=i),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),f(I,{modelValue:e(W).value,"onUpdate:modelValue":u[3]||(u[3]=i=>e(W).value=i),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),f(b,{title:"Add",n:"primary",onClick:u[4]||(u[4]=i=>re(e(W).key,e(W).value))},{default:k(()=>[f(L,{icon:"i-carbon-save"})]),_:1})])])):D("",!0),f(e(n),null,{default:k(()=>[f(me,{modelValue:e(K),"onUpdate:modelValue":u[7]||(u[7]=i=>te(K)?K.value=i:null),default:{type:"string"},"max-h-xs":"","of-auto":""},{default:k(()=>[e(g)[e(S)]?.length?(o(),p(R,{key:0},[c("div",Bt,[Lt,At,f(Ee,{icon:"i-carbon-edit",onClick:u[5]||(u[5]=i=>h("open-default-input"))}),Mt]),f(me,{modelValue:e(g)[e(S)],"onUpdate:modelValue":u[6]||(u[6]=i=>e(g)[e(S)]=i),disabled:"",p0:""},null,8,["modelValue"])],64)):D("",!0)]),_:1},8,["modelValue"])]),_:1}),e(S)==="snippet"?(o(),p("div",Ft,[e(fe).length?(o(),C(je,{key:0,"code-snippets":e(fe)},null,8,["code-snippets"])):D("",!0)])):e(K)?(o(),p("div",Ht,[e(S)==="body"?(o(),p(R,{key:0},[c("div",zt,[(o(),p(R,null,A(oe,i=>c("button",{key:i,px4:"",py2:"",border:"r base",hover:"bg-active",class:E({"border-b":i!==e(H)}),onClick:Q=>H.value=i},[c("div",{class:E({op30:i!==e(H)}),"font-mono":""},j(i),3)],10,Wt)),64)),Gt]),e(H)==="input"?(o(),C(e(w),{key:0})):e(H)==="json"?(o(),C(e(ct),Ze({key:1,modelValue:e($),"onUpdate:modelValue":u[8]||(u[8]=i=>te($)?$.value=i:null),class:[[s.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},s.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):D("",!0)],64)):(o(),C(e(w),{key:1}))])):D("",!0),e(U)?e(l)?(o(),C(Pe,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:k(()=>[F(" Fetching... ")]),_:1})):(o(),p(R,{key:6},[c("div",Jt,[Kt,e(t).error?(o(),C(ie,{key:0,"bg-red-400:10":"","text-red-400":""},{default:k(()=>[F(" Error ")]),_:1})):D("",!0),f(ie,{class:E({"bg-orange-400:10 text-orange-400":e(t).error,"bg-green-400:10 text-green-400":!e(t).error})},{default:k(()=>[F(j(e(t).statusCode),1)]),_:1},8,["class"]),e(t).contentType?(o(),p("code",Qt,j(e(t).contentType),1)):D("",!0),e(t).contentType==="application/json"?(o(),C(qe,{key:2,getter:()=>({input:e(a)})},null,8,["getter"])):D("",!0),Xt,Yt,f(ie,{"bg-green-400:10":"","text-green-400":""},{default:k(()=>[F(j(e(t).fetchTime)+" ms ",1)]),_:1})]),e(y)==="pdf"?(o(),p("div",Zt,[c("div",eo,[c("object",{data:e(a),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,to)])])):e(y)!=="media"?(o(),C(Be,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(a),lang:e(y)},null,8,["code","lang"])):(o(),p("div",oo,[c("div",no,[e(t).contentType.includes("image")?(o(),p("img",{key:0,rounded:"",src:e(a)},null,8,so)):(o(),p("video",lo,[c("source",{src:e(a),type:"video/mp4"},null,8,ao)]))])]))],64)):(o(),C(Oe,{key:4},{default:k(()=>[f(b,{n:"primary",onClick:pe},{default:k(()=>[f(L,{icon:"carbon:send"}),F(" Send request ")]),_:1})]),_:1}))])}}}),io={flex:"~ gap1","text-sm":""},uo={key:0,op50:""},co={op50:""},po=c("span",{op75:""},"Select a route to start",-1),fo=c("div",{p4:"",border:"b base"},[c("span",{"text-lg":""},"Default Inputs"),c("br"),c("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Vo=ae({__name:"server-routes",setup(r){const h=P(!1),m=tt(),n=ge(),{selectedRoute:w,view:_,inputDefaults:t}=Se("serverRoutes"),y=V(()=>{!n.value&&w.value&&(n.value=w.value.filepath);const v=m.value?.find(d=>d.filepath===n.value);return n.value!==w.value?.filepath&&v&&(w.value=v),v}),a=P(""),l=V(()=>new ot(m.value||[],{keys:["method","route"],shouldSort:!0})),U=V(()=>m.value?a.value?l.value.search(a.value).map(d=>d.item):m.value:[]),G=V(()=>{const v=[],d=(x,$)=>{x.routes=x.routes||[],x.routes.push($)};return U.value.forEach(x=>{const $=x.filepath.split("/"),g=$.slice($.indexOf("server")+1);g.length>0&&g[g.length-1].includes(".")&&g.pop();let O=null;if(g.forEach(q=>{const B=O?O.routes?.find(S=>S.route===q):v.find(S=>S.route===q);if(B)O=B;else{const S={route:q,filepath:q.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};O?d(O,S):v.push(S),O=S}}),x.type==="runtime"){const q=v.find(B=>B.route==="runtime");if(q)d(q,x);else{const B={route:"runtime",filepath:"runtime",type:"collection",routes:[x]};v.push(B)}}else O?d(O,x):v.push(x)}),v});function M(){_.value=_.value==="tree"?"list":"tree"}function z(v){return v.charAt(0).toUpperCase()+v.slice(1)}return(v,d)=>{const x=Ce,$=at,g=Ve,O=ro,q=lt,B=xe,S=nt,oe=Re,H=pt,K=ft,X=ke("tooltip");return o(),p(R,null,[f(S,{"storage-key":"tab-server-routes"},{left:k(()=>[f($,{search:e(a),"onUpdate:search":d[1]||(d[1]=T=>te(a)?a.value=T:null),pb2:""},{actions:k(()=>[de(f(x,{"text-lg":"",icon:e(_)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",onClick:M},null,8,["icon"]),[[X,"Toggle View"]]),de(f(x,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",onClick:d[0]||(d[0]=T=>h.value=!e(h))},null,512),[[X,"Default Inputs"]])]),default:k(()=>[c("div",io,[e(a)?(o(),p("span",uo,j(e(U).length)+" matched · ",1)):D("",!0),c("span",co,j(e(m)?.length)+" routes in total",1)])]),_:1},8,["search"]),(o(!0),p(R,null,A(e(_)==="tree"?e(G):e(U),T=>(o(),C(g,{key:T.filepath,item:T},null,8,["item"]))),128))]),right:k(()=>[(o(),C(st,{max:10},[e(y)?(o(),C(O,{key:e(y).filepath,route:e(y),onOpenDefaultInput:d[2]||(d[2]=T=>h.value=!0)},null,8,["route"])):D("",!0)],1024)),e(y)?D("",!0):(o(),C(B,{key:0},{default:k(()=>[f(q,{px6:"",py2:""},{default:k(()=>[po]),_:1})]),_:1}))]),_:1}),f(K,{modelValue:e(h),"onUpdate:modelValue":d[3]||(d[3]=T=>te(h)?h.value=T:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:d[4]||(d[4]=T=>h.value=!1)},{default:k(()=>[c("div",null,[fo,(o(!0),p(R,null,A(Object.keys(e(t)),T=>(o(),C(H,{key:T,text:`${z(T)} ${e(t)[T].length?`(${e(t)[T].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in v?v.ServerRouteTabIcons:e(Te))[T]},{default:k(()=>[f(oe,{modelValue:e(t)[T],"onUpdate:modelValue":Y=>e(t)[T]=Y,py0:"",default:{type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Vo as default};
